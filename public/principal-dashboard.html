<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principal Dashboard - TRACKIFY</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <nav class="dashboard-nav">
            <h1>ðŸŽ¯ TRACKIFY</h1>
            <p class="user-info">Principal Portal</p>
            <button onclick="logout()" class="btn-logout">Logout</button>
        </nav>

        <main class="dashboard-main">
            <h2>Principal Dashboard</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Today's Visitors</h3>
                    <p class="stat-number" id="todayVisitors">0</p>
                </div>
                <div class="stat-card">
                    <h3>Today's Staff Logs</h3>
                    <p class="stat-number" id="todayStaffLogs">0</p>
                </div>
                <div class="stat-card">
                    <h3>Monthly Visitors</h3>
                    <p class="stat-number" id="monthVisitors">0</p>
                </div>
                <div class="stat-card">
                    <h3>Active Visitors</h3>
                    <p class="stat-number" id="activeVisitors">0</p>
                </div>
            </div>

            <div class="dashboard-section">
                <h3>Generate Report</h3>
                <div class="report-controls">
                    <div class="form-group inline">
                        <label>From Date:</label>
                        <input type="date" id="fromDate">
                    </div>
                    <div class="form-group inline">
                        <label>To Date:</label>
                        <input type="date" id="toDate">
                    </div>
                    <button onclick="generateReport()" class="btn-primary">Generate Report</button>
                    <button onclick="getTodayReport()" class="btn-secondary">Today's Report</button>
                </div>
            </div>

            <div id="reportSection" class="dashboard-section" style="display: none;">
                <h3>Report: <span id="reportDate"></span></h3>
                
                <div class="report-summary">
                    <div class="summary-card">
                        <h4>Visitor Statistics</h4>
                        <p>Total Visitors: <strong id="reportVisitorCount">0</strong></p>
                    </div>
                    <div class="summary-card">
                        <h4>Staff Statistics</h4>
                        <p>Total Staff Logs: <strong id="reportStaffCount">0</strong></p>
                    </div>
                </div>

                <h4>Visitor Details</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Place</th>
                                <th>Purpose</th>
                                <th>Whom to Meet</th>
                                <th>In Time</th>
                                <th>Out Time</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="reportVisitorsBody">
                            <tr>
                                <td colspan="9" class="no-data">No data</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4>Staff Log Details</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Staff ID</th>
                                <th>Name</th>
                                <th>Department</th>
                                <th>Purpose</th>
                                <th>Out Time</th>
                                <th>In Time</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody id="reportStaffBody">
                            <tr>
                                <td colspan="8" class="no-data">No data</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button onclick="downloadReportCSV()" class="btn-primary">ðŸ“Š Download as Excel/CSV</button>
                    <button onclick="downloadReportPDF()" class="btn-primary" style="background: #e74c3c;">ðŸ“„ Download as PDF</button>
                </div>
            </div>
        </main>
    </div>

    <div id="messageBox" class="message-box"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/principal-dashboard.js"></script>
</body>
</html>
